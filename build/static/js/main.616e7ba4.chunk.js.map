{"version":3,"sources":["store/postsReducer.js","asyncActions/posts.js","components/Like.js","components/Remove.js","components/Post.js","components/Filter.js","App.js","store/index.js","index.js"],"names":["defaultState","posts","isFetching","isFiltered","isFailure","LOAD_POSTS","LOAD_POSTS_FAILURE","TOOGLE_LIKE_POST","REMOVE_POST","TOOGLE_FILTER_POSTS","fetchPosts","dispatch","fetch","then","response","json","type","payload","catch","e","Like","active","makeActive","className","onClick","xmlns","width","height","viewBox","d","fill","Remove","removeItem","Post","img","title","id","isLiked","useDispatch","removePostAction","likePostAction","src","alt","Filter","useSelector","state","postsReducer","App","useEffect","length","postsArr","filter","item","map","thumbnailUrl","post","rootReducer","combineReducers","action","filteredPosts","postsWithLike","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.616e7ba4.chunk.js","sourcesContent":["// Состояние по умолчанию\r\nconst defaultState = {\r\n  posts: [],\r\n  isFetching: true,\r\n  isFiltered: false,\r\n  isFailure: false,\r\n};\r\n\r\n// Типы action\r\nexport const LOAD_POSTS = \"LOAD_POSTS\";\r\nexport const LOAD_POSTS_FAILURE = \"LOAD_POSTS_FAILURE\";\r\nexport const TOOGLE_LIKE_POST = \"TOOGLE_LIKE_POST\";\r\nexport const REMOVE_POST = \"REMOVE_POST\";\r\nexport const TOOGLE_FILTER_POSTS = \"FILTER_POSTS\";\r\n\r\n//Reduser\r\nexport const postsReducer = (state = defaultState, action = {}) => {\r\n  switch (action.type) {\r\n    // Добавление постов при начальной загрузке\r\n    case LOAD_POSTS:\r\n      return {\r\n        ...state,\r\n        posts: [...state.posts, ...action.payload],\r\n        isFetching: false,\r\n      };\r\n    // Ошибка загрузки постов\r\n    case LOAD_POSTS_FAILURE:\r\n      return {\r\n        ...state,\r\n        isFetching: false,\r\n        isFailure: true,\r\n      };\r\n    // Удаление поста путём фильтрации\r\n    case REMOVE_POST:\r\n      let filteredPosts = state.posts.filter((item) => item.id !== action.id);\r\n      return {\r\n        ...state,\r\n        posts: [...filteredPosts],\r\n      };\r\n    // Переключение состояние лайка у поста\r\n    case TOOGLE_LIKE_POST:\r\n      let postsWithLike = state.posts.map((item) => {\r\n        if (item.id === action.id) {\r\n          item.isLiked = item.isLiked ? false : true;\r\n        }\r\n\r\n        return item;\r\n      });\r\n      return {\r\n        ...state,\r\n        posts: [...postsWithLike],\r\n      };\r\n    // Включение, выключение фильтрации\r\n    case TOOGLE_FILTER_POSTS: {\r\n      return {\r\n        ...state,\r\n        isFiltered: !state.isFiltered,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// Actions\r\nexport const loadPostsAction = (payload) => ({ type: LOAD_POSTS, payload });\r\nexport const loadPostsFailureAction = () => ({ type: LOAD_POSTS_FAILURE });\r\nexport const removePostAction = (id) => ({ type: REMOVE_POST, id });\r\nexport const likePostAction = (id) => ({ type: TOOGLE_LIKE_POST, id });\r\nexport const toogleFilterPostsAction = () => ({ type: TOOGLE_FILTER_POSTS });\r\n","import { loadPostsAction, loadPostsFailureAction } from \"../store/postsReducer\";\r\n\r\n// Получение постов\r\nexport const fetchPosts = () => {\r\n  return function (dispatch) {\r\n    fetch(\"https://jsonplaceholder.typicode.com/photos/?_limit=21\")\r\n      .then((response) => response.json())\r\n      .then((json) => dispatch(loadPostsAction(json)))\r\n      .catch((e) => {\r\n        dispatch(loadPostsFailureAction());\r\n      });\r\n  };\r\n};\r\n","import React from \"react\";\r\n\r\nconst Like = ({ active, makeActive }) => {\r\n  return (\r\n    <div className=\"like--container\" onClick={makeActive}>\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"24\"\r\n        height=\"24\"\r\n        viewBox=\"0 0 24 24\"\r\n        className={`like ${active ? \"active\" : \"\"}`}\r\n      >\r\n        <path\r\n          d=\"M12 4.435c-1.989-5.399-12-4.597-12 3.568 0 4.068 3.06 9.481 12 14.997 8.94-5.516 12-10.929 12-14.997 0-8.118-10-8.999-12-3.568z\"\r\n          fill=\"gray\"\r\n        />\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Like;\r\n","import React from \"react\";\r\n\r\nconst Remove = ({ removeItem }) => {\r\n  return (\r\n    <div className=\"remove--container\" onClick={removeItem}>\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"24\"\r\n        height=\"24\"\r\n        viewBox=\"0 0 24 24\"\r\n        className=\"remove\"\r\n      >\r\n        <path\r\n          d=\"M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z\"\r\n          fill=\"red\"\r\n        />\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Remove;\r\n","import React from \"react\";\r\nimport Like from \"./Like\";\r\nimport Remove from \"./Remove\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { removePostAction, likePostAction } from \"../store/postsReducer\";\r\n\r\nconst Post = ({ img, title, id, isLiked = false }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  // Удаление поста\r\n  function removePost() {\r\n    dispatch(removePostAction(id));\r\n  }\r\n\r\n  // Лайк поста\r\n  function likePost() {\r\n    dispatch(likePostAction(id));\r\n  }\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"card__img--container\">\r\n        <Remove removeItem={removePost} />\r\n        <Like active={isLiked} makeActive={likePost} />\r\n        <img className=\"card__img\" src={img} alt=\"\" />\r\n      </div>\r\n      <span className=\"card__title\">{title}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n","import React from \"react\";\r\nimport Like from \"./Like\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toogleFilterPostsAction } from \"../store/postsReducer\";\r\n\r\nconst Filter = () => {\r\n  const dispatch = useDispatch();\r\n  const isFiltered = useSelector((state) => state.postsReducer.isFiltered);\r\n\r\n  function filterPosts() {\r\n    dispatch(toogleFilterPostsAction());\r\n  }\r\n\r\n  return (\r\n    <div className=\"filter\">\r\n      <Like active={isFiltered} makeActive={filterPosts} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React, { useEffect } from \"react\";\r\nimport \"./style.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { fetchPosts } from \"./asyncActions/posts\";\r\nimport Post from \"./components/Post\";\r\nimport Filter from \"./components/Filter\";\r\n\r\nconst App = () => {\r\n  const posts = useSelector((state) => state.postsReducer.posts);\r\n  const isFetching = useSelector((state) => state.postsReducer.isFetching);\r\n  const isFiltered = useSelector((state) => state.postsReducer.isFiltered);\r\n  const isFailure = useSelector((state) => state.postsReducer.isFailure);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchPosts());\r\n  }, []); // eslint-disable-line\r\n\r\n  if (isFetching) {\r\n    return <div className=\"loading\">Идёт загрузка...</div>;\r\n  } else if (isFailure) {\r\n    return <div className=\"loading\">Произошла ошибка при загрузке постов</div>;\r\n  } else if (!posts.length) {\r\n    return <div className=\"loading\">Постов нет</div>;\r\n  }\r\n\r\n  let post = (item) => (\r\n    <Post\r\n      img={item.thumbnailUrl}\r\n      title={item.title}\r\n      key={item.id}\r\n      id={item.id}\r\n      isLiked={item.isLiked}\r\n    />\r\n  );\r\n\r\n  let postsArr = isFiltered\r\n    ? posts.filter((item) => item.isLiked)\r\n    : posts.map((item) => item);\r\n\r\n  return (\r\n    <>\r\n      <Filter />\r\n      <div className=\"card--container\">\r\n        {postsArr.length\r\n          ? postsArr.map((item) => post(item))\r\n          : \"Нет постов с лайками\"}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { createStore, applyMiddleware, combineReducers } from \"redux\";\r\nimport { postsReducer } from \"./postsReducer\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nconst rootReducer = combineReducers({\r\n  postsReducer,\r\n});\r\n\r\nexport const store = createStore(rootReducer, applyMiddleware(thunk));\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./store\";\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}